<?php /*a:2:{s:76:"/www/wwwroot/uexwash.com/ThinkAdmin/app/admin/view/config/storage-local.html";i:1670552399;s:72:"/www/wwwroot/uexwash.com/ThinkAdmin/app/admin/view/config/storage-0.html";i:1670552399;}*/ ?>
<form action="<?php echo sysuri(); ?>" method="post" data-auto="true" class="layui-form layui-card"><div class="layui-card-body padding-top-20"><div class="color-text layui-code text-center layui-bg-gray" style="border-left-width:1px;margin:0 0 15px 40px"><p class="margin-bottom-5 font-w7">文件将存储在本地服务器，默认保存在 public/upload 目录，文件以 HASH 命名。</p><p>文件存储的目录需要有读写权限，有足够的存储空间。<span class="color-red">特别注意，本地存储暂不支持图片压缩！</span></p></div><div class="layui-form-item"><label class="layui-form-label label-required"><b class="color-green">命名方式</b><br><span class="nowrap color-desc">NameType</span></label><div class="layui-input-block"><?php foreach(['xmd5'=>'文件哈希值 ( 支持秒传 )','date'=>'日期+随机 ( 普通上传 )'] as $k=>$v): ?><label class="think-radio notselect"><?php if(sysconf('storage.name_type') == $k): ?><input checked type="radio" name="storage.name_type" value="<?php echo htmlentities($k,ENT_QUOTES); ?>" lay-ignore><?php echo htmlentities($v,ENT_QUOTES); else: ?><input type="radio" name="storage.name_type" value="<?php echo htmlentities($k,ENT_QUOTES); ?>" lay-ignore><?php echo htmlentities($v,ENT_QUOTES); ?><?php endif; ?></label><?php endforeach; ?><p class="help-block">类型为“文件哈希”时可以实现文件秒传功能，同一个文件只需上传一次节省存储空间，推荐使用。</p></div></div><div class="layui-form-item"><label class="layui-form-label label-required"><b class="color-green">链接类型</b><br><span class="nowrap color-desc">LinkType</span></label><div class="layui-input-block"><?php foreach(['none'=>'简洁链接','full'=>'完整链接','none+compress'=>'简洁并压缩图片','full+compress'=>'完整并压缩图片'] as $k=>$v): ?><label class="think-radio notselect"><?php if(sysconf('storage.link_type') == $k): ?><input checked type="radio" name="storage.link_type" value="<?php echo htmlentities($k,ENT_QUOTES); ?>" lay-ignore><?php echo htmlentities($v,ENT_QUOTES); else: ?><input type="radio" name="storage.link_type" value="<?php echo htmlentities($k,ENT_QUOTES); ?>" lay-ignore><?php echo htmlentities($v,ENT_QUOTES); ?><?php endif; ?></label><?php endforeach; ?><p class="help-block">类型为“简洁链接”时链接将只返回 hash 地址，而“完整链接”将携带参数保留文件名，图片压缩功能云平台会单独收费。</p></div></div><div class="layui-form-item"><label class="layui-form-label" for="storage.allow_exts"><b class="color-green">允许类型</b><br><span class="nowrap color-desc">AllowExts</span></label><div class="layui-input-block"><input id="storage.allow_exts" type="text" name="storage.allow_exts" required value="<?php echo sysconf('storage.allow_exts'); ?>" placeholder="请输入系统文件上传后缀" class="layui-input"><p class="help-block">设置系统允许上传文件的后缀，多个以英文逗号隔开如：png,jpg,rar,doc，未设置允许上传的后缀</p></div></div><div class="layui-form-item"><label class="layui-form-label label-required"><b class="color-green">访问协议</b><br><span class="nowrap color-desc">Protocol</span></label><div class="layui-input-block"><?php if(!sysconf('storage.local_http_protocol')): sysconf('storage.local_http_protocol','http'); ?><?php endif; foreach(['follow'=>'FOLLOW','http'=>'HTTP','https'=>'HTTPS','path'=>'PATH','auto'=>'AUTO'] as $protocol=>$remark): ?><label class="think-radio"><?php if(sysconf('storage.local_http_protocol') == $protocol): ?><input checked type="radio" name="storage.local_http_protocol" value="<?php echo htmlentities($protocol,ENT_QUOTES); ?>" lay-ignore><?php echo htmlentities($remark,ENT_QUOTES); else: ?><input type="radio" name="storage.local_http_protocol" value="<?php echo htmlentities($protocol,ENT_QUOTES); ?>" lay-ignore><?php echo htmlentities($remark,ENT_QUOTES); ?><?php endif; ?></label><?php endforeach; ?><p class="help-block">本地存储访问协议，其中 HTTPS 需要配置证书才能使用（ FOLLOW 跟随系统，PATH 文件路径，AUTO 相对协议 ）</p></div></div><div class="layui-form-item"><label class="layui-form-label" for="storage.local_http_domain"><b class="color-green">访问域名</b><br><span class="nowrap color-desc">Domain</span></label><div class="layui-input-block"><input id="storage.local_http_domain" type="text" name="storage.local_http_domain" value="<?php echo sysconf('storage.local_http_domain'); ?>" placeholder="请输入上传后的访问域名 (非必填项)" class="layui-input"><p class="help-block">填写上传后的访问域名（不指定时根据当前访问地址自动计算），如：static.thinkadmin.top</p></div></div><div class="hr-line-dashed margin-left-40"></div><input type="hidden" name="storage.type" value="local"><div class="layui-form-item text-center padding-left-40"><button class="layui-btn" type="submit">保存配置</button><button class="layui-btn layui-btn-danger" type='button' data-confirm="确定要取消修改吗？" data-close>取消修改</button></div></div></form>